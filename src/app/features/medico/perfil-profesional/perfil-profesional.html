<div class="p-8">
  <!-- Título -->
  <h1 class="text-3xl font-bold text-center text-slate-800 mb-10">
    Perfil Profesional
  </h1>

  @if (loading()) {
  <div class="flex justify-center py-20">
    <div
      class="animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"
    ></div>
  </div>
  } @else if (medico(); as m) {
  <div class="max-w-3xl mx-auto">
    <!-- Header: Avatar + Info -->
    <div class="flex items-start gap-8 mb-8">
      <!-- Avatar -->
      <div class="flex flex-col items-center">
        <div
          class="w-24 h-24 rounded-full bg-slate-200 flex items-center justify-center text-slate-600 text-3xl border-2 border-slate-300"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            class="h-12 w-12"
            fill="none"
            viewBox="0 0 24 24"
            stroke="currentColor"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"
            />
          </svg>
        </div>
        <span class="mt-2 text-sm text-slate-600 font-medium"
          >{{ m.cedula }}</span
        >
      </div>

      <!-- Info Card -->
      <div
        class="flex-1 bg-white rounded-xl border border-slate-300 p-5 shadow-sm"
      >
        <h2 class="text-xl font-semibold text-slate-800 mb-1">
          {{ m.nombreCompleto }}
        </h2>
        <p class="text-slate-600">{{ edad() }} años</p>
        <p class="text-slate-500 text-sm mt-1">{{ m.email }}</p>
      </div>
    </div>

    <!-- Cards: Especialidad + Consultas -->
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
      <!-- Especialidad -->
      <div
        class="bg-white rounded-xl border border-slate-300 p-6 text-center shadow-sm"
      >
        <p class="text-sm text-slate-500 mb-2">Especialidad</p>
        <p class="text-2xl font-semibold text-slate-800">
          {{ especialidadPrincipal() }}
        </p>
      </div>

      <!-- Consultas Atendidas -->
      <div
        class="bg-white rounded-xl border border-slate-300 p-6 text-center shadow-sm"
      >
        <p class="text-sm text-slate-500 mb-2">Consultas Atendidas</p>
        <p class="text-4xl font-bold text-slate-800">{{ m.citasAtendidas }}</p>
      </div>
    </div>

    <!-- Horarios Section -->
    <div
      class="bg-white rounded-xl border border-slate-300 shadow-sm overflow-hidden"
    >
      <div
        class="flex flex-col sm:flex-row items-center justify-between p-5 border-b border-slate-300 gap-4"
      >
        <h3 class="text-lg font-semibold text-slate-700">
          Horarios de atención
        </h3>
        <a
          routerLink="/doctor/excepciones-horario"
          class="px-4 py-2 border-2 border-slate-800 text-slate-800 rounded-lg hover:bg-slate-100 font-medium transition-colors"
        >
          Gestionar Excepciones
        </a>
      </div>

      <!-- Tabla de Horarios -->
      <div class="p-5">
        @if (m.horarios && m.horarios.length > 0) {
        <div class="border border-slate-300 rounded-lg overflow-hidden">
          <table class="w-full">
            <thead class="bg-slate-50">
              <tr>
                <th
                  class="py-3 px-4 text-left font-semibold text-slate-700 w-1/4"
                >
                  Día
                </th>
                <th class="py-3 px-4 text-center font-semibold text-slate-700">
                  Horario
                </th>
              </tr>
            </thead>
            <tbody class="divide-y divide-slate-300">
              @for (h of m.horarios; track h.dia) {
              <tr>
                <td
                  class="py-3 px-4 text-left font-medium text-slate-700 capitalize"
                >
                  {{ h.dia }}
                </td>
                <td class="py-3 px-4 text-center text-slate-600">
                  {{ formatearHora(h.horaInicio) }} - {{
                  formatearHora(h.horaFin) }}
                </td>
              </tr>
              }
            </tbody>
          </table>
        </div>
        } @else {
        <p class="text-center text-slate-500 py-6">
          No hay horarios configurados
        </p>
        }
      </div>
    </div>
  </div>
  } @else {
  <div class="max-w-lg mx-auto text-center py-10">
    <div class="bg-amber-50 border-2 border-amber-200 rounded-xl p-8">
      <h3 class="text-xl font-bold text-amber-800 mb-2">
        Datos no disponibles
      </h3>
      <p class="text-amber-700 mb-4">
        No se encontraron datos del perfil médico
      </p>
      <button
        (click)="recargar()"
        class="px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium"
      >
        Recargar Página
      </button>
    </div>
  </div>
  }
</div>
